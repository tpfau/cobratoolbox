## Example application scripts

The scripts in the folder `/papers/2016_pairwiseModeling_HumanGutMicrobiota` describe the simulation of microbial pairwise interactions with COBRA Toolbox functions. The functions called by these scripts are provided in the folder `/src/multiSpeciesModelling`. This method was used to join `773` gut microbial metabolic reconstructions in every possible combination and predict the interactions between each pair on two diets in the absence and presence of oxygen. Please see [Magnusdottir, Heinken et al., Nat Biotechnol. 2017 35(1):81-89 (PMID:27893703)](http://www.nature.com/nbt/journal/v35/n1/abs/nbt.3703.html) for a detailed description of the simulation results.

The script `buildPairwiseModels` shows how to build two-microbe models that enable the simulation of pairwise interactions with constraint-based methods. To simulate the interactions between two reconstructed microbes, it is necessary to build a joint matrix of the two individual genome-scale reconstructions. The joint matrix enables the two joined reconstructions to freely exchange metabolites with each other as well as access some defined nutrient input via a shared compartment. Unless the modeler imposes additional constraints on the transport reactions between the individual reconstructions and the shared compartment, each reconstruction can access every metabolite it can transport from the shared compartment. Constraints implementing the nutrient conditions are set on the exchange reactions on the shared compartment.The script `buildPairwiseModels` shows the necessary inputs for joining two genome-scale reconstructions for example reconstructions included in the [AGORA resource (PMID:27893703)](http://www.nature.com/nbt/journal/v35/n1/abs/nbt.3703.html). The script may be adapted to users' own genome-scale reconstructions as convenient. The function `createMultipleSpeciesModel` can also be used to join any desired number of reconstructions. Note that the prerequisite for simulating multi-species interactions is that the nomenclature for reactions and metabolites matches for any joined genome-scale-reconstructions. It is the responsibility of the user to ensure uniform nomenclature. The created pairwise models are tracked and described in the output file `pairedModelsList`.

The script `simulationPairwiseInteractions` demonstrates how pairwise interactions are predicted using the `multiSpeciesModelling` module. The script requires the output file of `buildPairwiseModels`, `pairedModelsList`, as an input file. The pairwise models listed in `pairedModelsList` are subjected to the four simulations conditions used in [PMID:27893703](http://www.nature.com/nbt/journal/v35/n1/abs/nbt.3703.html) one by one and the consequences of the pairwise growth for each joined microbe as well as the overall interaction are computed. For each simulation condition, an output file showing the outcome of each pairwise simulation is generated. There are six possible interactions between bacteria that can be predicted with the present method: competition, parasitism, amensalism, neutralism, commensalism, and mutualism. Please see the function `analyzePairwiseInteractions` for a brief description of these interactions. Note that the predicted interaction depends on the reactions and metabolites encoded in each individual genome-scale reconstruction as well as on the imposed constraints. For one pairwise model, different interactions may be predicted on different simulated nutrient conditions. The script `simulationPairwiseInteractions` may also be adapted to users' own simulation conditions.

*Almut Heinken, 07.04.17*

*[almut.heinken@uni.lu](almut.heinken@uni.lu)*
